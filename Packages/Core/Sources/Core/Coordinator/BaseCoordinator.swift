//
//  BaseCoordinator.swift
//  Core
//
//  Created by Любченко Станислав Валерьевич on 12.02.2026.
//

import UIKit

/// Базовый абстрактный класс координатора.
/// Реализует хранение ссылки на роутер.
///
/// - Generic Parameter R: Тип роутера (`Routing`), с которым работает данный координатор.
///   Это обеспечивает строгую типизацию: координатор авторизации не сможет случайно вызвать методы таббара.
@MainActor
open class BaseCoordinator<R: Routing>: Coordinator {

    /// Роутер, через который осуществляется навигация.
    ///
    /// - Note: Ссылка является слабой (`weak`), чтобы избежать цикла удерживания (Retain Cycle),
    ///   так как Роутер владеет Координатором (Logic) по сильной ссылке.
    public weak var router: R?

    public init() {}

    /// Точка входа в бизнес-логику навигации.
    ///
    /// - Warning: **Никогда не вызывайте этот метод вручную.**
    ///   Этот метод вызывается автоматически самим Роутером в нужный момент, например `viewDidLoad`.
    ///   Это гарантирует, что навигация начнется только тогда, когда UI полностью готов.
    open func start() {
        fatalError("Метод start() должен быть переопределен в наследнике")
    }
}
